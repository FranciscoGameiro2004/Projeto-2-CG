<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
        body {
            /* set margin to 0 and overflow to hidden, to use the complete page */
            margin: 0;
            overflow: hidden;
        }
    </style>
    <script type="importmap">
      {
        "imports": {
          "three": "https://unpkg.com/three/build/three.module.js",
          "three/addons/": "https://unpkg.com/three/examples/jsm/"
        }
      }
    </script>
  </head>
  <body>
    <script type="module">
            import * as THREE from "three";
            import { OrbitControls } from 'three/addons/controls/OrbitControls.js';

            const scene = new THREE.Scene();

            let textureCube = new THREE.CubeTextureLoader()
            .setPath( 'assets/cubeMapping/' )
            .load( [
              'right.jpg', 'left.jpg',
              'top.jpg', 'bottom.jpg',
              'back.jpg', 'front.jpg' 
            ] );
            scene.background = textureCube;

            const camera = new THREE.PerspectiveCamera(45,window.innerWidth/window.innerHeight,1,1000);
            camera.position.set(4, 2, -2);
            camera.lookAt(new THREE.Vector3(0, 0, 0)); // point camera

            const ortoCcamera = new THREE.OrthographicCamera( window.innerWidth / - 2, window.innerWidth / 2, window.innerHeight / 2, window.innerHeight / - 2, 1, 100000 );
            ortoCcamera.lookAt(new THREE.Vector3(0, 0, 0));
            ortoCcamera.position.set(0, 0, -3);
            ortoCcamera.zoom = 300

            const renderer = new THREE.WebGLRenderer();
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setClearColor("#333333");
            document.body.appendChild(renderer.domElement);

            const controls = new OrbitControls(camera, renderer.domElement);
            const newControls = new OrbitControls(ortoCcamera, renderer.domElement);

            //VARIÁVEIS GLOBAIS
            let currentPedalRotation = 0
            let rotationStage = {left: 0, right: 4}
            let clock = {old: 0, new: Date.now()}

            let bikeTexture = new THREE.TextureLoader().load('Assets/bikeTexture.jpeg')
            bikeTexture.repeat.set(1,0.25)

            const bicycle = new THREE.Object3D()
            scene.add(bicycle)

            let geometry = new THREE.BoxGeometry( .9, .05, .05 ); 
            let material = new THREE.MeshBasicMaterial( { map: bikeTexture } ); 
            const structure1 = new THREE.Mesh( geometry, material )
            bicycle.add( structure1 );
            structure1.rotateZ(Math.PI/12)

            geometry = new THREE.BoxGeometry( .5, .05, .05 ); 
            material = new THREE.MeshBasicMaterial( { map: bikeTexture } ); 
            const structure2 = new THREE.Mesh( geometry, material )
            structure1.add( structure2 );
            structure2.position.set(-.48,.2,0)
            structure2.rotateZ(3*Math.PI/2)

            geometry = new THREE.BoxGeometry( 1.3, .05, .05 ); 
            material = new THREE.MeshBasicMaterial( { map: bikeTexture } ); 
            const structure3 = new THREE.Mesh( geometry, material )
            structure1.add( structure3 );
            structure3.position.set(.4,.10,0)
            structure3.rotateZ(3*Math.PI/2)

            geometry = new THREE.BoxGeometry( .1, .3, .12 );
            material = new THREE.MeshBasicMaterial( { color: 'maroon' } ); 
            const seat = new THREE.Mesh( geometry, material )
            seat.position.set(-.3,0,0)
            structure2.add(seat)

            geometry = new THREE.CylinderGeometry( .1, .1, .1, 8 ); 
            material = new THREE.MeshBasicMaterial( {color: 'silver'} ); 
            const central = new THREE.Mesh( geometry, material );
            central.rotateZ(Math.PI/2)
            central.position.set(-.6,0,0)
            structure3.add( central );

            geometry = new THREE.BoxGeometry( .05, .05, .6 );
            material = new THREE.MeshBasicMaterial( { color: 'black' } ); 
            const stick = new THREE.Mesh( geometry, material )
            central.add(stick)

            geometry = new THREE.BoxGeometry( .05, .05, .2 );
            material = new THREE.MeshBasicMaterial( { color: 'grey' } ); 
            const lStick = new THREE.Mesh( geometry, material )
            lStick.position.set(-.07,0,-.32)
            lStick.rotateY(Math.PI/3)
            stick.add(lStick)

            geometry = new THREE.BoxGeometry( .05, .05, .2 );
            material = new THREE.MeshBasicMaterial( { color: 'grey' } ); 
            const rStick = new THREE.Mesh( geometry, material )
            rStick.position.set(-.07,0,.32)
            rStick.rotateY(-Math.PI/3)
            stick.add(rStick)

            geometry = new THREE.CylinderGeometry( .45, .45, .04, 12 );
            geometry = new THREE.TorusGeometry(.45, 0.025,8,100)
            material = new THREE.MeshBasicMaterial( {color: 0x000000} ); 
            const tireF = new THREE.Mesh( geometry, material );
            //tireF.rotateX(Math.PI/2)
            tireF.position.set(.75,0,0)
            structure3.add( tireF );

            geometry = new THREE.BoxGeometry(.03, .9, .03)
            material = new THREE.MeshBasicMaterial( {color: "grey"} );
            const fTireSupport1 = new THREE.Mesh(geometry, material)
            tireF.add(fTireSupport1)
            const fTireSupport2 = new THREE.Mesh(geometry, material)
            tireF.add(fTireSupport2)
            fTireSupport2.rotateZ(Math.PI/4)
            const fTireSupport3 = new THREE.Mesh(geometry, material)
            tireF.add(fTireSupport3)
            fTireSupport3.rotateZ(Math.PI/2)
            const fTireSupport4 = new THREE.Mesh(geometry, material)
            tireF.add(fTireSupport4)
            fTireSupport4.rotateZ(3*Math.PI/4)

            geometry = new THREE.BoxGeometry( .05, .65, .05 );
            material = new THREE.MeshBasicMaterial( { map: bikeTexture } ); 
            const lProtection = new THREE.Mesh( geometry, material )
            lProtection.position.set(.28,-.2,.05)
            lProtection.rotateZ(Math.PI/5.5)
            structure2.add(lProtection)

            geometry = new THREE.BoxGeometry( .05, .65, .05 );
            material = new THREE.MeshBasicMaterial( { map: bikeTexture } ); 
            const rProtection = new THREE.Mesh( geometry, material )
            rProtection.position.set(.28,-.2,-.05)
            rProtection.rotateZ(Math.PI/5.5)
            structure2.add(rProtection)

            geometry = new THREE.CylinderGeometry( .45, .45, .04, 12 )
            geometry = new THREE.TorusGeometry(.45, 0.025,8,100) 
            material = new THREE.MeshBasicMaterial( {color: 0x000000} ); 
            const tireB = new THREE.Mesh( geometry, material );
            tireB.position.set(0,-.35,-.05)
            lProtection.add( tireB );

            geometry = new THREE.BoxGeometry(.03, .9, .03)
            material = new THREE.MeshBasicMaterial( {color: "grey"} );
            const bTireSupport1 = new THREE.Mesh(geometry, material)
            tireB.add(bTireSupport1)
            const bTireSupport2 = new THREE.Mesh(geometry, material)
            tireB.add(bTireSupport2)
            bTireSupport2.rotateZ(Math.PI/4)
            const bTireSupport3 = new THREE.Mesh(geometry, material)
            tireB.add(bTireSupport3)
            bTireSupport3.rotateZ(Math.PI/2)
            const bTireSupport4 = new THREE.Mesh(geometry, material)
            tireB.add(bTireSupport4)
            bTireSupport4.rotateZ(3*Math.PI/4)

            geometry = new THREE.BoxGeometry( .05, .85, .05 );
            material = new THREE.MeshBasicMaterial( { map: bikeTexture } ); 
            const lPedalProtect = new THREE.Mesh( geometry, material )
            lPedalProtect.position.set(.55,-.15,-.05)
            lPedalProtect.rotateZ(-Math.PI/12)
            structure2.add(lPedalProtect)

            geometry = new THREE.BoxGeometry( .05, .85, .05 );
            material = new THREE.MeshBasicMaterial( { map: bikeTexture } ); 
            const rPedalProtect = new THREE.Mesh( geometry, material )
            rPedalProtect.position.set(.55,-.15,.05)
            rPedalProtect.rotateZ(-Math.PI/12)
            structure2.add(rPedalProtect)

            geometry = new THREE.CylinderGeometry( .1, .1, .04, 8 ); 
            material = new THREE.MeshBasicMaterial( {color: 'silver'} ); 
            const lCirclePedal = new THREE.Mesh( geometry, material );
            lCirclePedal.rotateX(Math.PI/2)
            lCirclePedal.position.set(0,.4,0)
            lPedalProtect.add( lCirclePedal );

                        geometry = new THREE.CylinderGeometry( .1, .1, .04, 8 ); 
            material = new THREE.MeshBasicMaterial( {color: 'silver'} ); 
            const rCirclePedal = new THREE.Mesh( geometry, material );
            rCirclePedal.rotateX(Math.PI/2)
            rCirclePedal.position.set(0,.4,0)
            rPedalProtect.add( rCirclePedal );

            geometry = new THREE.BoxGeometry( .2, .025, .05 );
            material = new THREE.MeshBasicMaterial( { color: 'grey' } ); 
            const rPedalLeg = new THREE.Mesh( geometry, material )
            rPedalLeg.position.set(.1,.025,.0)
            rCirclePedal.add(rPedalLeg)

            geometry = new THREE.BoxGeometry( .2, .025, .05 );
            material = new THREE.MeshBasicMaterial( { color: 'grey' } ); 
            const lPedalLeg = new THREE.Mesh( geometry, material )
            lPedalLeg.position.set(-.1,-.025,.0)
            lCirclePedal.add(lPedalLeg)

            geometry = new THREE.BoxGeometry( .05, .1, .1 );
            material = new THREE.MeshBasicMaterial( { color: 'black' } ); 
            const lPedal = new THREE.Mesh( geometry, material )
            lPedal.position.set(-.1,-.05,.0)
            lPedalLeg.add(lPedal)

            geometry = new THREE.BoxGeometry( .05, .1, .1 );
            material = new THREE.MeshBasicMaterial( { color: 'black' } ); 
            const rPedal = new THREE.Mesh( geometry, material )
            rPedal.position.set(.1,.05,.0)
            rPedalLeg.add(rPedal)

            const person = new THREE.Object3D()
            bicycle.add(person)

            person.position.set(-.7,.4,0)

            let hipDenimTexture = new THREE.TextureLoader().load('Assets/denim.jpg')
            let upperLegDenimTexture = new THREE.TextureLoader().load('Assets/denim.jpg')
            upperLegDenimTexture.repeat.set(0.25,1)
            let lowerLegDenimTexture = new THREE.TextureLoader().load('Assets/denim.jpg')
            lowerLegDenimTexture.repeat.set(0.25,1)

            geometry = new THREE.BoxGeometry( .15, .15, .35 );
            material = new THREE.MeshBasicMaterial( { map:hipDenimTexture } ); 
            const hip = new THREE.Mesh( geometry, material )
            hip.position.set(.1,.05,.0)
            person.add(hip)

            //PERNA ESQUERDA
            const leftLeg = new THREE.Object3D()
            hip.add(leftLeg)

            geometry = new THREE.BoxGeometry( .15, .6, .10 );
            material = new THREE.MeshBasicMaterial( { map: upperLegDenimTexture } ); 
            const lUpperLeg = new THREE.Mesh( geometry, material )
            lUpperLeg.position.set(0,-.28,-.12)
            leftLeg.add(lUpperLeg)

            const lLowerLeg_PIVOT = new THREE.Object3D()
            lUpperLeg.add(lLowerLeg_PIVOT)
            lLowerLeg_PIVOT.position.set(0,-.3,0)
            /* let axeLEG1 = new THREE.AxesHelper(2)
            lUpperLeg.add(axeLEG1) */

            geometry = new THREE.BoxGeometry( .15, .5, .10 );
            material = new THREE.MeshBasicMaterial( { map:lowerLegDenimTexture } ); 
            const lLowerLeg = new THREE.Mesh( geometry, material )
            lLowerLeg.position.set(0,-.25,0)
            lLowerLeg_PIVOT.add(lLowerLeg)
            /* let axeLEG2 = new THREE.AxesHelper(2)
            lLowerLeg_PIVOT.add(axeLEG2) */

            const lFeet_PIVOT = new THREE.Object3D()
            lLowerLeg_PIVOT.add(lFeet_PIVOT)
            lFeet_PIVOT.position.set(0,-.5,0)
            /* let axeLEG3 = new THREE.AxesHelper(2)
            lFeet_PIVOT.add(axeLEG3) */

            geometry = new THREE.BoxGeometry( .25, .10, .10 );
            material = new THREE.MeshBasicMaterial( { color: 'dimgray' } ); 
            const lFeet = new THREE.Mesh( geometry, material )
            lFeet.position.set(.05,-.05,0)
            lFeet_PIVOT.add(lFeet)
            /* let axeLEG4 = new THREE.AxesHelper(2)
            lLowerLeg_PIVOT.add(axeLEG4) */

            //PERNA DIREITA
            const rightLeg = new THREE.Object3D()
            hip.add(rightLeg)

            geometry = new THREE.BoxGeometry( .15, .6, .10 );
            material = new THREE.MeshBasicMaterial( { map: upperLegDenimTexture } ); 
            const rUpperLeg = new THREE.Mesh( geometry, material )
            rUpperLeg.position.set(0,-.28,.12)
            rightLeg.add(rUpperLeg)

            const rLowerLeg_PIVOT = new THREE.Object3D()
            rUpperLeg.add(rLowerLeg_PIVOT)
            rLowerLeg_PIVOT.position.set(0,-.3,0)
            /* let axeLEG5 = new THREE.AxesHelper(2)
            rUpperLeg.add(axeLEG5) */

            geometry = new THREE.BoxGeometry( .15, .5, .10 );
            material = new THREE.MeshBasicMaterial( { map:lowerLegDenimTexture } ); 
            const rLowerLeg = new THREE.Mesh( geometry, material )
            rLowerLeg.position.set(0,-.25,0)
            rLowerLeg_PIVOT.add(rLowerLeg)
            /* let axeLEG6 = new THREE.AxesHelper(2)
            rLowerLeg_PIVOT.add(axeLEG6) */

            const rFeet_PIVOT = new THREE.Object3D()
            rLowerLeg_PIVOT.add(rFeet_PIVOT)
            rFeet_PIVOT.position.set(0,-.5,0)
            /* let axeLEG7 = new THREE.AxesHelper(2)
            rFeet_PIVOT.add(axeLEG7) */

            geometry = new THREE.BoxGeometry( .25, .10, .10 );
            material = new THREE.MeshBasicMaterial( { color: 'dimgray' } ); 
            const rFeet = new THREE.Mesh( geometry, material )
            rFeet.position.set(.05,-.05,0)
            rFeet_PIVOT.add(rFeet)
            /* let axeLEG8 = new THREE.AxesHelper(2)
            lLowerLeg_PIVOT.add(axeLEG8) */

            let torsoTshirtTexture = new THREE.TextureLoader().load('Assets/tshirt.jpg')
            let upperTshirtTexture = new THREE.TextureLoader().load('Assets/tshirt.jpg')

            //TRONCO
            geometry = new THREE.BoxGeometry( .15, .6, .35 );
            material = new THREE.MeshBasicMaterial( { color: 'silver', map: torsoTshirtTexture } ); 
            const torso = new THREE.Mesh( geometry, material )
            torso.position.set(0,.37,.0)
            hip.add(torso)


            //BRAÇO ESQUERDO
            const leftArm = new THREE.Object3D()
            leftArm.position.set(0,.25,-0.175-.0375)
            /* let axeARM1 = new THREE.AxesHelper(.8)
            leftArm.add(axeARM1) */
            torso.add(leftArm)

            geometry = new THREE.BoxGeometry( .15, .4, .075 );
            material = new THREE.MeshBasicMaterial( { color: 'silver', map: upperTshirtTexture } ); 
            const lUpperArm = new THREE.Mesh( geometry, material )
            lUpperArm.position.set(0,-.2,.0)
            leftArm.add(lUpperArm)

            const lLowerArm_PIVOT = new THREE.Object3D()
            lLowerArm_PIVOT.position.set(0,-.4,0)
            leftArm.add(lLowerArm_PIVOT)
            /* let axeARM2 = new THREE.AxesHelper(.8)
            lLowerArm_PIVOT.add(axeARM2) */

            geometry = new THREE.BoxGeometry( .15, .4, .075 );
            material = new THREE.MeshBasicMaterial( { color: 'wheat' } ); 
            const lLowerArm = new THREE.Mesh( geometry, material )
            lLowerArm.position.set(0,-.2,.0)
            lLowerArm_PIVOT.add(lLowerArm)

            const lHand_PIVOT = new THREE.Object3D()
            /* let axeARM3 = new THREE.AxesHelper(.8)
            lHand_PIVOT.add(axeARM3) */
            lHand_PIVOT.position.set(0,-.2,0)
            lLowerArm.add(lHand_PIVOT)

            geometry = new THREE.BoxGeometry( .15, .075, .0375/2 );
            material = new THREE.MeshBasicMaterial( { color: 'wheat' } ); 
            const lPalmHand = new THREE.Mesh( geometry, material )
            lPalmHand.position.set(0,-.0375,.0)
            lHand_PIVOT.add(lPalmHand)

            const lMiddleHand_Pivot = new THREE.Object3D()
            lMiddleHand_Pivot.position.set(0,-.0375,0)
            /* let axeARM4 = new THREE.AxesHelper(.4)
            lMiddleHand_Pivot.add(axeARM4) */
            lPalmHand.add(lMiddleHand_Pivot)

            geometry = new THREE.BoxGeometry( .15, .01875, .0375/2 );
            material = new THREE.MeshBasicMaterial( { color: 'wheat' } ); 
            const lMiddleHand = new THREE.Mesh( geometry, material )
            lMiddleHand.position.set(0,-.009375,.0)
            lMiddleHand_Pivot.add(lMiddleHand)

            const lTopHand_Pivot = new THREE.Object3D()
            lTopHand_Pivot.position.set(0,-.009375,0)
            /* let axeARM5 = new THREE.AxesHelper(.4)
            lTopHand_Pivot.add(axeARM5) */
            lMiddleHand.add(lTopHand_Pivot)

            geometry = new THREE.BoxGeometry( .15, .075, .0375/2 );
            material = new THREE.MeshBasicMaterial( { color: 'wheat' } ); 
            const lTopHand = new THREE.Mesh( geometry, material )
            lTopHand.position.set(0,-.0375,.0)
            lTopHand_Pivot.add(lTopHand)

            //BRAÇO DIREITO
            const rightArm = new THREE.Object3D()
            rightArm.position.set(0,.25,0.175+.0375)
            /* let axeARM6 = new THREE.AxesHelper(.8)
            rightArm.add(axeARM6) */
            torso.add(rightArm)

            geometry = new THREE.BoxGeometry( .15, .4, .075 );
            material = new THREE.MeshBasicMaterial( { color: 'silver', map: upperTshirtTexture } ); 
            const rUpperArm = new THREE.Mesh( geometry, material )
            rUpperArm.position.set(0,-.2,.0)
            rightArm.add(rUpperArm)

            const rLowerArm_PIVOT = new THREE.Object3D()
            rLowerArm_PIVOT.position.set(0,-.4,0)
            rightArm.add(rLowerArm_PIVOT)
            /* let axeARM7 = new THREE.AxesHelper(.8)
            rLowerArm_PIVOT.add(axeARM7) */

            geometry = new THREE.BoxGeometry( .15, .4, .075 );
            material = new THREE.MeshBasicMaterial( { color: 'wheat' } ); 
            const rLowerArm = new THREE.Mesh( geometry, material )
            rLowerArm.position.set(0,-.2,.0)
            rLowerArm_PIVOT.add(rLowerArm)

            const rHand_PIVOT = new THREE.Object3D()
            /* let axeARM8 = new THREE.AxesHelper(.8)
            rHand_PIVOT.add(axeARM8) */
            rHand_PIVOT.position.set(0,-.2,0)
            rLowerArm.add(rHand_PIVOT)

            geometry = new THREE.BoxGeometry( .15, .075, .0375/2 );
            material = new THREE.MeshBasicMaterial( { color: 'wheat' } ); 
            const rPalmHand = new THREE.Mesh( geometry, material )
            rPalmHand.position.set(0,-.0375,.0)
            rHand_PIVOT.add(rPalmHand)

            const rMiddleHand_Pivot = new THREE.Object3D()
            rMiddleHand_Pivot.position.set(0,-.0375,0)
            /* let axeARM9 = new THREE.AxesHelper(.4)
            rMiddleHand_Pivot.add(axeARM9) */
            rPalmHand.add(rMiddleHand_Pivot)

            geometry = new THREE.BoxGeometry( .15, .01875, .0375/2 );
            material = new THREE.MeshBasicMaterial( { color: 'wheat' } ); 
            const rMiddleHand = new THREE.Mesh( geometry, material )
            rMiddleHand.position.set(0,-.009375,.0)
            rMiddleHand_Pivot.add(rMiddleHand)

            const rTopHand_Pivot = new THREE.Object3D()
            rTopHand_Pivot.position.set(0,-.009375,0)
            /* let axeARM10 = new THREE.AxesHelper(.4)
            rTopHand_Pivot.add(axeARM5) */
            rMiddleHand.add(rTopHand_Pivot)

            geometry = new THREE.BoxGeometry( .15, .075, .0375/2 );
            material = new THREE.MeshBasicMaterial( { color: 'wheat' } ); 
            const rTopHand = new THREE.Mesh( geometry, material )
            rTopHand.position.set(0,-.0375,.0)
            rTopHand_Pivot.add(rTopHand)

            //PESCOÇO
            
            geometry = new THREE.BoxGeometry( .10,.0375, .10);
            material = new THREE.MeshBasicMaterial( { color: 'wheat' } ); 
            const neck = new THREE.Mesh( geometry, material )
            neck.position.set(0,.31875,0)
            torso.add(neck)

            //CABEÇA
            geometry = new THREE.BoxGeometry( .20,.25, .20);
            material = new THREE.MeshBasicMaterial( { color: 'wheat' } ); 
            const head = new THREE.Mesh( geometry, material )
            head.position.set(0,.1375,0)
            neck.add(head)

            //OLHOS
            geometry = new THREE.BoxGeometry( .0125,.050, .025);
            material = new THREE.MeshBasicMaterial( { color: 'black' } ); 
            const leftEye = new THREE.Mesh( geometry, material )
            leftEye.position.set(.10625,.03,-.045)
            head.add(leftEye)

            geometry = new THREE.BoxGeometry( .0125,.050, .025);
            material = new THREE.MeshBasicMaterial( { color: 'black' } ); 
            const rightEye = new THREE.Mesh( geometry, material )
            rightEye.position.set(.10625,.03,.045)
            head.add(rightEye)

            //NARIZ
            geometry = new THREE.BoxGeometry( .04,.060, .030);
            material = new THREE.MeshBasicMaterial( { color: 'orange' } ); 
            const nose = new THREE.Mesh( geometry, material )
            nose.position.set(.09,-.015,0)
            nose.rotation.z = Math.PI/8
            head.add(nose)

            //BOCA
            geometry = new THREE.BoxGeometry( .0125,.02, .065);
            material = new THREE.MeshBasicMaterial( { color: 'black' } ); 
            const mouth = new THREE.Mesh( geometry, material )
            mouth.position.set(.10625,-.08,.045)
            head.add(mouth)

            //CABELO
            geometry = new THREE.BoxGeometry( .20,.03, .20);
            material = new THREE.MeshBasicMaterial( { color: 'sienna' } ); 
            const hair = new THREE.Mesh( geometry, material )
            hair.position.set(0,.135,0)
            head.add(hair)

            geometry = new THREE.BoxGeometry( .015,.25, .20);
            material = new THREE.MeshBasicMaterial( { color: 'sienna' } ); 
            const backHair = new THREE.Mesh( geometry, material )
            backHair.position.set(-0.1,0,0)
            head.add(backHair)

            //---CENÁRIO---

            //ESTRADA
            geometry = new THREE.PlaneGeometry(32,6)
            let roadTexture = new THREE.TextureLoader().load('Assets/road.png')
            roadTexture.wrapS = THREE.RepeatWrapping;
            roadTexture.wrapT = THREE.RepeatWrapping;
            material = new THREE.MeshBasicMaterial( {color: "gray", side: THREE.DoubleSide, map: roadTexture} )
            const road = new THREE.Mesh( geometry, material )
            road.rotation.x=Math.PI/2
            road.position.set(0,-.97,0)
            scene.add(road)

            //Passeios
            let sidewalkTexture = new THREE.TextureLoader().load('Assets/sidewalk.jpg')
            sidewalkTexture.wrapS = THREE.RepeatWrapping;
            sidewalkTexture.wrapT = THREE.RepeatWrapping;
            sidewalkTexture.repeat.set(5,1)

            geometry = new THREE.BoxGeometry( 32,.25, 1.5);
            material = new THREE.MeshBasicMaterial( { color: 'white', map: sidewalkTexture } ); 
            const lSidewalk = new THREE.Mesh( geometry, material )
            lSidewalk.position.set(0,-.85,-3.25)
            scene.add(lSidewalk)

            geometry = new THREE.BoxGeometry( 32,.25, 1.5);
            material = new THREE.MeshBasicMaterial( { color: 'white', map: sidewalkTexture } ); 
            const rSidewalk = new THREE.Mesh( geometry, material )
            rSidewalk.position.set(0,-.85,3.25)
            scene.add(rSidewalk)

            //roadTexture.offset.set(0.5, 0)

            //Para rodar: central.rotateY(angulo)
            let angle = 0  //3.5*Math.PI/4
            //let angle = 0
            leftLeg.rotateZ(3.25*Math.PI/8)
            lLowerLeg_PIVOT.rotateZ(-1*Math.PI/2)
            lFeet_PIVOT.rotateZ(0.8125*Math.PI/8)
            lFeet.rotateZ(0)

                lPedal.rotateY(angle)
                rPedal.rotateY(angle)
                rCirclePedal.rotateY(-angle)
                lCirclePedal.rotateY(-angle)

            renderer.setAnimationLoop(render)
            
            let a = Math.PI/96
            let i = 1

            let roadGo = 0
            let axleAngle = 0
            let releaseInc = 6
            let release = false
            let move = {left: false, right: false, transitionLeft: false}
            let inc = 0
            let incOP = 0
            function render(){
              let rotation
              clock.old = clock.new
              clock.new = Date.now()

                tireF.rotateZ(-Math.PI/100)
                tireB.rotateZ(-Math.PI/100)

                /* lPedal.rotateY(.05)
                rPedal.rotateY(.05)
                rCirclePedal.rotateY(-.05)
                lCirclePedal.rotateY(-.05)*/

                //bicycle.translateX(.01)
                roadTexture.offset.set(roadGo, 0)
                sidewalkTexture.offset.set(roadGo*5, 0)
                roadGo += 2*Math.PI/2000
                rotateLegAndPedal()

                if (move.left){
                  if (inc < 15){
                    moveCyclist(-0.0125)
                    rotation = Math.PI/12
                    inc++
                  } else {
                    moveCyclist(-0.025)
                    rotation = Math.PI/6
                    incOP = 0
                  }
                }
                else if (move.right){
                  rotation = -Math.PI/6
                  if (inc < 15){
                    moveCyclist(0.0125)
                    rotation = -Math.PI/12
                    inc++
                  } else {
                    moveCyclist(0.025)
                    rotation = -Math.PI/6
                    incOP = 0
                  }
                }
                else{
                  if (move.transitionLeft) {
                    if (incOP < 15){
                      moveCyclist(0.0125)
                      rotation = -Math.PI/12
                      incOP++
                    } else {
                      rotation = 0
                      inc = 0
                      move.transitionLeft = false
                    }
                  } else{
                    if (incOP < 15){
                      moveCyclist(-0.0125)
                      rotation = Math.PI/12
                      incOP++
                    } else {
                      rotation = 0
                      inc = 0
                    }
                  }
                }

                rotateAxle(rotation)

                renderer.render(scene, camera);
            }

            function rotateLegAndPedal(){
              lPedal.rotateY(2*Math.PI/100)
              rPedal.rotateY(2*Math.PI/100)
              rCirclePedal.rotateY(-2*Math.PI/100)
              lCirclePedal.rotateY(-2*Math.PI/100)

              currentPedalRotation += 2*Math.PI/100
              currentPedalRotation -= (2*Math.PI)*Math.floor(currentPedalRotation/(2*Math.PI))

              //console.log(currentPedalRotation)
              //console.log(currentPedalRotation - (2*Math.PI)*Math.floor(currentPedalRotation/(2*Math.PI)));
              //console.log(clock.new-clock.old);

              let leftInc = {leg:.0, lowPiv:.0, feetPiv:.0}
              
              
              if (currentPedalRotation>=0*Math.PI/4 && currentPedalRotation<1*Math.PI/4) {
                rotationStage.left = 0
                rotationStage.right = 4
              } else if (currentPedalRotation>=1*Math.PI/4 && currentPedalRotation<2*Math.PI/4) {
                rotationStage.left = 1
                rotationStage.right = 5
              } else if (currentPedalRotation>=2*Math.PI/4 && currentPedalRotation<3*Math.PI/4) {
                rotationStage.left = 2
                rotationStage.right = 6
              } else if (currentPedalRotation>=3*Math.PI/4 && currentPedalRotation<4*Math.PI/4) {
                rotationStage.left = 3
                rotationStage.right = 7
              } else if (currentPedalRotation>=4*Math.PI/4 && currentPedalRotation<5*Math.PI/4) {
                rotationStage.left = 4
                rotationStage.right = 0
              } else if (currentPedalRotation>=5*Math.PI/4 && currentPedalRotation<6*Math.PI/4) {
                rotationStage.left = 5
                rotationStage.right = 1
              } else if (currentPedalRotation>=6*Math.PI/4 && currentPedalRotation<7*Math.PI/4) {
                rotationStage.left = 6
                rotationStage.right = 2
              } else if (currentPedalRotation>=7*Math.PI/4 && currentPedalRotation<8*Math.PI/4) {
                rotationStage.left = 7
                rotationStage.right = 3
              }

              //TODO: DEPOIS ACRESCENTAR MAIS PONTOS FIXOS!!!

              // Rotação da perna esquerda
              if (rotationStage.left == 0) {
                leftLeg.rotation.z = 3.25*Math.PI/8
                lLowerLeg_PIVOT.rotation.z = -1*Math.PI/2
                lFeet_PIVOT.rotation.z = 0.8125*Math.PI/8
              } else if (rotationStage.left == 1) {
                leftLeg.rotation.z = 3.3*Math.PI/8
                lLowerLeg_PIVOT.rotation.z = -0.85*Math.PI/2
                lFeet_PIVOT.rotation.z = Math.PI/16
              } else if (rotationStage.left == 2) {
                leftLeg.rotation.z = 2.3*Math.PI/8
                lLowerLeg_PIVOT.rotation.z = -0.3*Math.PI/2
                lFeet_PIVOT.rotation.z = -1.2*Math.PI/8
              } else if (rotationStage.left == 3) {
                leftLeg.rotation.z = Math.PI/8
                lLowerLeg_PIVOT.rotation.z = 0
                lFeet_PIVOT.rotation.z = -Math.PI/8
              } else if (rotationStage.left == 4) {
                leftLeg.rotation.z = Math.PI/8
                lLowerLeg_PIVOT.rotation.z = -0.05*Math.PI
                lFeet_PIVOT.rotation.z = 1.95*Math.PI
              } else if (rotationStage.left == 5) {
                leftLeg.rotation.z = 1.7*Math.PI/8
                lLowerLeg_PIVOT.rotation.z = -4.5*Math.PI/2
                lFeet_PIVOT.rotation.z = -0.25*Math.PI/8
              } else if (rotationStage.left == 6) {
                leftLeg.rotation.z = Math.PI/4
                lLowerLeg_PIVOT.rotation.z = -0.4*Math.PI
                lFeet_PIVOT.rotation.z = 1.2*Math.PI/8
              } else if (rotationStage.left == 7) {
                leftLeg.rotation.z = 2.8*Math.PI/8
                lLowerLeg_PIVOT.rotation.z = -Math.PI/2
                lFeet_PIVOT.rotation.z = 1.2*Math.PI/8
              }

              // Rotação da perna direita
              if (rotationStage.right == 0) {
                rightLeg.rotation.z = 3.25*Math.PI/8
                rLowerLeg_PIVOT.rotation.z = -1*Math.PI/2
                rFeet_PIVOT.rotation.z = 0.8125*Math.PI/8
              } else if (rotationStage.right == 1) {
                rightLeg.rotation.z = 3.3*Math.PI/8
                rLowerLeg_PIVOT.rotation.z = -0.85*Math.PI/2
                rFeet_PIVOT.rotation.z = Math.PI/16
              } else if (rotationStage.right == 2) {
                rightLeg.rotation.z = 2.3*Math.PI/8
                rLowerLeg_PIVOT.rotation.z = -0.3*Math.PI/2
                rFeet_PIVOT.rotation.z = -1.2*Math.PI/8
              } else if (rotationStage.right == 3) {
                rightLeg.rotation.z = Math.PI/8
                rLowerLeg_PIVOT.rotation.z = 0
                rFeet_PIVOT.rotation.z = -Math.PI/8
              } else if (rotationStage.right == 4) {
                rightLeg.rotation.z = Math.PI/8
                rLowerLeg_PIVOT.rotation.z = -0.05*Math.PI
                rFeet_PIVOT.rotation.z = 1.95*Math.PI
              } else if (rotationStage.right == 5) {
                rightLeg.rotation.z = 1.7*Math.PI/8
                rLowerLeg_PIVOT.rotation.z = -4.5*Math.PI/2
                rFeet_PIVOT.rotation.z = -0.25*Math.PI/8
              } else if (rotationStage.right == 6) {
                rightLeg.rotation.z = Math.PI/4
                rLowerLeg_PIVOT.rotation.z = -0.4*Math.PI
                rFeet_PIVOT.rotation.z = 1.2*Math.PI/8
              } else if (rotationStage.right == 7) {
                rightLeg.rotation.z = 2.8*Math.PI/8
                rLowerLeg_PIVOT.rotation.z = -Math.PI/2
                rFeet_PIVOT.rotation.z = 1.2*Math.PI/8
              }

              
            }

            function rotateAxle(angle){
              if (angle == 0){
                // 0º: 0rad
                leftArm.rotation.set(0.13973562893888195,0.1383910125983522,0.7756979111217072)
                lLowerArm_PIVOT.rotation.set(0.6154797086703874,-0.5235987755982988,0.9553166181245093)
                lMiddleHand_Pivot.rotation.set(-0.39269908169872414,0,0)
                lTopHand_Pivot.rotation.set(0,0,0)
                lHand_PIVOT.rotation.set(0,0,0)
                rightArm.rotation.set(-0.13973562893888195,-0.1383910125983522,0.7756979111217072)
                rLowerArm_PIVOT.rotation.set(-0.6154797086703874,0.5235987755982988,0.9553166181245093)
                rMiddleHand_Pivot.rotation.set(0.39269908169872414,0,0)
                rTopHand_Pivot.rotation.set(0,0,0)
                rHand_PIVOT.rotation.set(0,0,0)

                structure3.rotation.y = 0
              } else if (angle > 0 && angle <= Math.PI/12){
                // 15º: PI/12
                leftArm.rotation.set(0.2732458833982063,0.11131689054210762,0.3773797797097227)
                lLowerArm_PIVOT.rotation.set(0.7458526607730736,-0.2740142038101564,1.285872200172834)
                lMiddleHand_Pivot.rotation.set(-0.39269908169872414,0,0)
                lTopHand_Pivot.rotation.set(0,0,0)
                lHand_PIVOT.rotation.set(0,0.7853981633974484,0)
                rightArm.rotation.set(-0.17942031304883935,-0.5641662804538249,1.2437808403128645)
                rLowerArm_PIVOT.rotation.set(0.6995312149437698,0.547551256551187,0.024127433865992594)
                rMiddleHand_Pivot.rotation.set(0.39269908169872414,0,0)
                rTopHand_Pivot.rotation.set(0,0,0)
                rHand_PIVOT.rotation.set(0,0,0)

                structure3.rotation.y = Math.PI/12
              } else if (angle > Math.PI/12 && angle <= Math.PI/6){
                // 30º: PI/6
                leftArm.rotation.set(0.09547888076095759,0.022883644148700113,0.2345261183743228)
                lLowerArm_PIVOT.rotation.set(0,0,1.335176877775662)
                lMiddleHand_Pivot.rotation.set(0,0,0)
                lTopHand_Pivot.rotation.set(0,0,0)
                lHand_PIVOT.rotation.set(0,0,0)
                rightArm.rotation.set(-0.059111058836772465,-0.28870070079232735,1.3658518704644926)
                rLowerArm_PIVOT.rotation.set(0.4248366767227627,0.35733564771389964,-0.16676706554025333)
                rMiddleHand_Pivot.rotation.set(0.39269908169872414,0,0)
                rTopHand_Pivot.rotation.set(-0.5235987755982987,0,0)
                rHand_PIVOT.rotation.set(-0.27421801808929586,0.766363449082209,0.19267028931741573)

                structure3.rotation.y = Math.PI/6
              } else if (angle < 0 && angle >= -Math.PI/12) {
                // -15º: -PI/12
                leftArm.rotation.set(0.17942031304883935,0.5641662804538249,1.2437808403128645)
                lLowerArm_PIVOT.rotation.set(-0.6995312149437698,-0.547551256551187,0.024127433865992594)
                lMiddleHand_Pivot.rotation.set(-0.39269908169872414,0,0)
                lTopHand_Pivot.rotation.set(0,0,0)
                lHand_PIVOT.rotation.set(0,0,0)
                rightArm.rotation.set(-0.2732458833982063,-0.11131689054210762,0.3773797797097227)
                rLowerArm_PIVOT.rotation.set(0.7458526607730736,-0.2740142038101564,1.285872200172834)
                rMiddleHand_Pivot.rotation.set(0.39269908169872414,0,0)
                rTopHand_Pivot.rotation.set(0,0,0)
                rHand_PIVOT.rotation.set(0,0.7853981633974484,0)

                structure3.rotation.y = -Math.PI/12
              } else if (angle < -Math.PI/12 && angle >= -Math.PI/6) {
                // -30º: -PI/6
                leftArm.rotation.set(0.059111058836772465,0.28870070079232735,1.3658518704644926)
                lLowerArm_PIVOT.rotation.set(-0.4248366767227627,-0.35733564771389964,-0.16676706554025333)
                lMiddleHand_Pivot.rotation.set(0.39269908169872414,0,0)
                lTopHand_Pivot.rotation.set(-0.5235987755982987,0,0)
                lHand_PIVOT.rotation.set(0.27421801808929586,-0.766363449082209,0.19267028931741573)
                rightArm.rotation.set(-0.09547888076095759,-0.022883644148700113,0.2345261183743228)
                rLowerArm_PIVOT.rotation.set(0,0,1.335176877775662)
                rMiddleHand_Pivot.rotation.set(0,0,0)
                rTopHand_Pivot.rotation.set(0,0,0)
                rHand_PIVOT.rotation.set(0,0,0)

                structure3.rotation.y = -Math.PI/6
              }
            }
            
            function moveCyclist(inc){
              if (bicycle.position.z < 2.25 && bicycle.position.z > -2.25) {
                bicycle.position.z += inc
              } else if (bicycle.position.z < 2.25) {
                bicycle.position.z = -2.24
              } else if (bicycle.position.z > -2.25) {
                bicycle.position.z = 2.24
              }
            }

            document.onkeydown = function (e){
              if (e.key == 'a' || e.key == 'A'){
                move.left = true
                move.right = false
                incOP = 0
                move.transitionLeft = false
              } else if (e.key == 'd' || e.key == 'D'){
                move.left = false
                move.right = true
                incOP = 0
                move.transitionLeft = true
              }

              
            }

            document.onkeyup = function (e){
              if (e.key == 'a' || e.key == 'A'){
                move.left = false
                releaseInc = 0
                release = true
                inc = 0
              }

              if (e.key == 'd' || e.key == 'D'){
                move.right = false
                releaseInc = 0
                release = true
                inc = 0
              }
            }
    </script>
    <a href="https://www.vecteezy.com/free-vector/road">Road Vectors by Vecteezy</a>
    <a href="https://www.vecteezy.com/free-photos">Free Stock photos by Vecteezy</a>
    <a href="https://www.freepik.com/free-photo/blue-texture_1006119.htm#query=blue%20fabric%20texture&position=0&from_view=search&track=ais&uuid=12e25027-1947-49ab-a7ef-f6f5d409ed12">Image by freestockcenter on Freepik</a>
    <a href="https://www.freepik.com/free-vector/diagonal-leather-texture-background_17995625.htm#page=3&query=blue%20metal%20texture&position=21&from_view=search&track=ais&uuid=ca25a646-49c6-40e2-9304-317eee0e17ad">Image by vector_corp on Freepik</a>
    <a href="https://www.freepik.com/free-photo/silver-metallic-textured-background_4246716.htm#query=silver%20texture&position=3&from_view=keyword&track=ais&uuid=96cd0610-7989-49af-b066-8374cd10f451">Image by rawpixel.com on Freepik</a>
  </body>
</html>